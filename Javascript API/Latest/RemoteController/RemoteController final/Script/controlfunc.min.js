function getNewSessionId(successfunction){var ip=getCookie("ip"); var Url="http://" + ip + "?action=sendcommand&actiondetail=initializeremotecontrol&user=presentations2go&password=" + getCookie("password"); $.ajax({url: Url, type: "Post", dataType: "jsonp", async: false, success: function( json ){var j=$.parseJSON(json); setCookie("sessionId",j['sessionId'],0.3); successfunction();}, error: function( errorThrown ){console.log(errorThrown); console.log("Got problems connecting to Encoder. Please try logging in again!"); window.location.href="./";}});}function ajaxToEncoderCall(Url, Type, successfunction){$.ajax({url: Url, type: "Post", dataType: "jsonp", async: false, success: function( json ){var attempts=getCookie("Attempts"); var j=JSON.parse(json); if (Type=='GetMetaData'){/*Executes the successfunction and gives the metadata that has been asked for with it.*/ successfunction(j['metadata'][0]['value']);}else if (Type=='GetConfiguration'){/*console.log(j['configurations'][0]['value']); Executes the successfunction and gives the configuration that has been asked for with it.*/ successfunction(j['configurations'][0]['value']);}else if (successfunction !=null){successfunction();}}, error: function( errorThrown ){console.log(errorThrown); console.log("Cannot connect to Encoder. Please try logging in again!"); window.location.href="./";}});}function processCall(action, actiondetail, Type, successfunction){getNewSessionId(function(){var ip=getCookie("ip"); var password=getCookie("password"); var sessionId=getCookie("sessionId"); var Url="http://" + ip + "?action=" + action + "&" + actiondetail + "&user=presentations2go&password=" + password + "&sessionId=" + sessionId; ajaxToEncoderCall(Url, Type, successfunction);});}function setMetaData(type, data, successfunction){if(data=="")data="unknown"; var actiondetail=type + "=" + data; if(successfunction !=null){processCall("SetMetadata", actiondetail, "Set", successfunction);}else{processCall("SetMetadata", actiondetail, "Set");}}function getMetaData(type, successfunction){var actiondetail="actionDetail=" + type; processCall("GetMetadata", actiondetail, "GetMetaData", successfunction);}function setConfiguration(type, data, successfunction){var actiondetail=type + "=" + data; if(successfunction !=null){processCall("SetConfiguration", actiondetail, "Set", successfunction);}else{processCall("SetConfiguration", actiondetail, "Set");}}function getConfiguration(type, successfunction){var actiondetail="actionDetail=" + type; processCall("GetConfiguration", actiondetail, "GetConfiguration", successfunction);}function getRecStatus(successfunction){processCall("info", "actionDetail=status", "GetConfiguration", successfunction);}