$(document).ready(function(){window.haschanged=false;$("#errorfield").empty();getMetadataAndFillHtml("#metatitle","Title", function(){getMetadataAndFillHtml("#metadescription","Description", function(){getConfigurationAndUse("#1","live", function(){getConfigurationAndUse("#2","autopublish", function(){getConfigurationAndUse("#3","noslide", function(){getConfiguration("startdelay", function(sec){$("#delaynr").val(sec);getRecStatus(function (j){if (j=="Recording "){window.isrecording=true;window.currentlylive=false;updatelivecheckbox();$("#recpausebtn p:first-child").attr("id", "pause").empty();$("#recpausebtn").attr("title", "Pause").removeAttr("class");}else if (j=="Live"){window.isrecording=true;window.currentlylive=true;updatelivecheckbox();$("#recpausebtn").attr("class", "liverecording").attr("title", "You are live right now");$("#recpausebtn p:first-child").attr("id", "pause").empty();}else if (j=="Recording (Paused) "){window.isrecording=true;window.currentlylive=false;updatelivecheckbox();$("#recpausebtn").attr("title", "Resume").removeAttr("class");$("#recpausebtn p:first-child").attr("id", "resume").append("<p></p>").append("<p></p>");}});});});});});});});setInterval(function(){if(!window.haschanged){getRecStatus(function (j){if (j=="Recording "){window.isrecording=true;window.currentlylive=false;$("#recpausebtn p:first-child").attr("id", "pause").empty();$("#recpausebtn").attr("title", "Pause").removeAttr("class");}else if (j=="Live"){window.isrecording=true;window.currentlylive=true;$("#recpausebtn").attr("class", "liverecording").attr("title", "You are live right now");$("#recpausebtn p:first-child").attr("id", "pause").empty();}else if (j=="Recording (Paused) "){window.isrecording=true;window.currentlylive=false;$("#recpausebtn").attr("title", "Resume").removeAttr("class");$("#recpausebtn p:first-child").attr("id", "resume").append("<p></p>").append("<p></p>");}else{window.isrecording=false;window.currentlylive=false;$("#recpausebtn").attr("title", "Record").attr("class", "recstatus");$("#recpausebtn p:first-child").attr("id", "record").empty();}var datachanged=false;var changedtextstring=[];getMetaData("Title", function (j){if ($("#metatitle").val() !=j){datachanged=true;changedtextstring[0]="<li>Title: <ul class=inlinelist><li><b style='font-weight: bold;'>your:</b> &quot;" + $("#metatitle").val() + "&quot;</li><li><b style='font-weight: bold;'>software:</b> &quot;" + j + "&quot;</li></ul></li>"}getMetaData("Description", function (k){if ($("#metadescription").val() !=k){datachanged=true;changedtextstring[1]="<li>Description: <ul class=inlinelist><li><b style='font-weight: bold;'>your:</b> &quot;" + $("#metadescription").val() + "&quot;</li><li><b style='font-weight: bold;'>software:</b> &quot;" + k + "&quot;</li></ul></li>"}getConfiguration("live", function (l){if (l !=$("#1").prop('checked')){datachanged=true;changedtextstring[2]="<li>Live checkbox: <ul class=inlinelist><li><b style='font-weight: bold;'>your:</b> &quot;" + ($("#1").is(':checked') ? "checked" : "unchecked") + "&quot;</li><li><b style='font-weight: bold;'>software:</b> &quot;" + (l ? "checked" : "unchecked") + "&quot;</li></ul></li>"}getConfiguration("autopublish", function (m){if (m !=$("#2").prop('checked')){datachanged=true;changedtextstring[3]="<li>Autopublish checkbox: <ul class=inlinelist><li><b style='font-weight: bold;'>your:</b> &quot;" + ($("#2").is(':checked') ? "checked" : "unchecked") + "&quot;</li><li><b style='font-weight: bold;'>software:</b> &quot;" + (m ? "checked" : "unchecked") + "&quot;</li></ul></li>"}getConfiguration("noslide", function(n){if(n !=$("#3").prop('checked')){datachanged=true;changedtextstring[4]="<li>NoSlides checkbox: <ul class=inlinelist><li><b style='font-weight: bold;'>your:</b> &quot;" + $("#3").is(':checked')? "checked" : "unchecked" + "&quot;</li><li><b style='font-weight: bold;'>software:</b> &quot;" + (n ? "checked" : "unchecked")+ "&quot;</li></ul></li>"}getConfiguration("mastervolume", function(o){if((((o/655.35) < ($("#slider").slider("option", "value")-.5)) || ((o/655.35) > ($("#slider").slider("option", "value")+.5)))){datachanged=true;changedtextstring[5]="<li>Volume: <ul class=inlinelist><li><b style='font-weight: bold;'>your:</b> &quot;" + $("#slider").slider("option", "value") + "&#37;&quot;</li><li><b style='font-weight: bold;'>software:</b> &quot;" + (o/655.35) + "&#37;&quot;</li></ul></li>"}getConfiguration("startdelay", function (p){if (p !=$("#delaynr").val()){datachanged=true;changedtextstring[6]="<li>StartDelay has changed! <ul class=inlinelist><li><b style='font-weight: bold;'>your</b> &quot;" + $("#delaynr").val() + " Seconds&quot;</li><li><b style='font-weight: bold;'>software:</b> &quot;" + p + " Seconds&quot;</li></ul></li>"}if (datachanged){window.haschanged=true;var newtextstring="";for (var i=0; i <=6; i++) if (changedtextstring[i] !=null) newtextstring +=changedtextstring[i];swal({title: "Data changed",text: "We can see your data changed from the encoder. <br>This is what changed: <div id=scroller><ul id=valchangedwithencoder>" + newtextstring + "</ul></div>Do you want to change your settings or the settings in the software?",type: "warning",showCancelButton: true,confirmButtonColor: "#DD6B55",confirmButtonText: "Change the setings in the software",cancelButtonText: "Change my settings",closeOnConfirm: true,closeOnCancel: true,showLoaderOnConfirm: true,showLoaderOnCancel: true,html: true},function (isConfirm){if (isConfirm){setMetaData("Title", $("#metatitle").val(), function (){setMetaData("Description", $("#metadescription").val(), function (){setConfiguration("live", $("#1").prop('checked'), function (){setConfiguration("autopublish", $("#2").prop('checked'), function (){setConfiguration("noslide", $("#3").prop('checked'), function(){setConfiguration("mastervolume",$("#slider").slider("value"), function(){checkdelaynr($("#delaynr").val());window.haschanged=false;});});});});});});}else{$("#metatitle").val(j);$("#metadescription").val(k);if (l)$("#1").prop("checked", true).next().attr("class", "activechkbx");else $("#1").prop("checked", false).next().removeClass();if (m)$("#2").prop("checked", true).next().attr("class", "activechkbx");else $("#2").prop("checked", false).next().removeClass();if(n)$("#3").prop("checked", true).next().attr("class", "activechkbx");else $("#3").prop("checked", false).next().removeClass();$("#slider").slider("value", (o/655.35));$("#delaynr").val(p);window.haschanged=false;}});}});});});});});});});});}}, ((2 * 60) * 1000));if(getCookie("understandwarning")=="true"){$("#infofield").remove();}initializeremotecontrollerevents();checkCookiesEnables();});function logout(){window.location.href="./";}function getMetadataAndFillHtml(attribute, type, successfunction){getMetaData(type, function(j){$(attribute).empty().html(j);$(attribute).empty().val(j);successfunction();});}function getConfigurationAndUse(attribute, type, successfunction){getConfiguration(type, function(j){if(j==true){$(attribute).prop("checked", true).next().attr("class", "activechkbx");}else{$(attribute).prop("checked", false);}successfunction();});}function btnPress(buttontype, successfunction){var actiondetail="actiondetail=" + buttontype;processCall("sendcommand", actiondetail, "btnpress", successfunction);}function initializeimagevent(imgid, delayms, pictype){var password=getCookie("password");var url="http://" + getCookie("ip") + "?action=getvisualelement&actiondetail="+ pictype +"&user=presentations2go&password=" + password;$(imgid).attr("src", url);return setInterval(function(){var d=new Date();var url="http://" + getCookie("ip") + "?action=getvisualelement&actiondetail="+ pictype +"&user=presentations2go&password=" + password + "&hour=" + d.getHours() + "&sec=" + d.getSeconds() + "&milisec=" + d.getMilliseconds();$(imgid).attr("src", url);}, delayms);}function initializesingleimagevent(imgid){var d=new Date();var url="http://" + getCookie("ip") + "?action=getvisualelement&actiondetail=status&user=presentations2go&password=" + getCookie("password") + "&hour=" + d.getHours() + "&sec=" + d.getSeconds() + "&milisec=" + d.getMilliseconds();$(imgid).attr("src", url);}function updatelivecheckbox(succesfunction){getConfiguration("live",function(j){window.livecheckbox=j;if(succesfunction !=null) succesfunction();});}function usecamera(camerafunction){processCall("SendCommand", "actiondetail="+camerafunction, "camera");}